<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Python" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Python lxml.html第三方模块">
<meta property="og:type" content="article">
<meta property="og:title" content="第十二天 记录 lxml.html第三方模块">
<meta property="og:url" content="http://yoursite.com/读书笔记/读书笔记-Python/第十二天 记录/index.html">
<meta property="og:site_name" content="Snaker95">
<meta property="og:description" content="Python lxml.html第三方模块">
<meta property="og:updated_time" content="2017-04-11T03:38:14.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第十二天 记录 lxml.html第三方模块">
<meta name="twitter:description" content="Python lxml.html第三方模块">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: undefined,
      author: '博主'
    }
  };
</script>

  <title> 第十二天 记录 lxml.html第三方模块 | Snaker95 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Snaker95</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                第十二天 记录 lxml.html第三方模块
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-09T09:00:07+08:00" content="2017-03-09">
              2017-03-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv"><i class="fa fa-file-o"></i>
              <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <a id="more"></a>
<p>[TOC]</p>
<h1 id="&#x7B2C;&#x5341;&#x4E8C;&#x5929;-&#x8BB0;&#x5F55;"><a href="#&#x7B2C;&#x5341;&#x4E8C;&#x5929;-&#x8BB0;&#x5F55;" class="headerlink" title="&#x7B2C;&#x5341;&#x4E8C;&#x5929; &#x8BB0;&#x5F55;"></a>&#x7B2C;&#x5341;&#x4E8C;&#x5929; &#x8BB0;&#x5F55;</h1><h2 id="1-lxml-html&#x6A21;&#x5757;&#x5B66;&#x4E60;&#x6B65;&#x9AA4;"><a href="#1-lxml-html&#x6A21;&#x5757;&#x5B66;&#x4E60;&#x6B65;&#x9AA4;" class="headerlink" title="1. lxml.html&#x6A21;&#x5757;&#x5B66;&#x4E60;&#x6B65;&#x9AA4;"></a>1. lxml.html&#x6A21;&#x5757;&#x5B66;&#x4E60;&#x6B65;&#x9AA4;</h2><p>&#x5B66;&#x4E60;&#x5185;&#x5BB9;&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x65B9;&#x9762;:</p>
<ul>
<li>&#x89E3;&#x6790;HTML<ul>
<li>&#x89E3;&#x6790;HTML&#x6BB5;&#x843D;</li>
<li>&#x4E2D;&#x65AD;&#x4E86;&#x7684;&#x9875;&#x9762;</li>
</ul>
</li>
<li>&#x83B7;&#x53D6;HTML&#x5143;&#x7D20;&#x65B9;&#x6CD5;</li>
<li>&#x4F7F;&#x7528;E-factory&#x521B;&#x5EFA;HTML<ul>
<li>&#x5B9E;&#x4F8B;</li>
<li>&#x67E5;&#x770B;&#x751F;&#x6210;&#x7684;&#x7F51;&#x9875;</li>
</ul>
</li>
<li>&#x4F7F;&#x7528;&#x94FE;&#x63A5;<ul>
<li>&#x76F8;&#x5173;&#x65B9;&#x6CD5;</li>
</ul>
</li>
<li>form&#x8868;&#x5355;<ul>
<li>form&#x8868;&#x5355;&#x586B;&#x5145;</li>
<li>form &#x8868;&#x5355;&#x63D0;&#x4EA4;</li>
</ul>
</li>
<li>&#x6E05;&#x7406;HTML</li>
</ul>
<h2 id="2-&#x89E3;&#x6790;HTML"><a href="#2-&#x89E3;&#x6790;HTML" class="headerlink" title="2. &#x89E3;&#x6790;HTML"></a>2. &#x89E3;&#x6790;HTML</h2><h3 id="&#x89E3;&#x6790;HTML&#x6BB5;&#x843D;&#x7684;&#x76F8;&#x5173;&#x65B9;&#x6CD5;-lxml-html"><a href="#&#x89E3;&#x6790;HTML&#x6BB5;&#x843D;&#x7684;&#x76F8;&#x5173;&#x65B9;&#x6CD5;-lxml-html" class="headerlink" title="&#x89E3;&#x6790;HTML&#x6BB5;&#x843D;&#x7684;&#x76F8;&#x5173;&#x65B9;&#x6CD5;: lxml.html"></a>&#x89E3;&#x6790;HTML&#x6BB5;&#x843D;&#x7684;&#x76F8;&#x5173;&#x65B9;&#x6CD5;: <code>lxml.html</code></h3><ul>
<li><p><code>.parse(filename_url_or_file)</code><br>  &#x53EF;&#x4EE5;&#x89E3;&#x6790;&#x6765;&#x81F3;URL&#x6216;&#x8005;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;&#x6765;&#x7684;&#x5B57;&#x7B26;&#x4E32;, &#x82E5;&#x4E3A;URL: &#x901A;&#x8FC7;<em>&#x4F20;&#x9012;</em>&#x6216;&#x8005;<em>geturl()</em>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x5230;&#x7684;URL; &#x82E5;&#x4E3A;&#x6587;&#x4EF6;: &#x901A;&#x8FC7;<em>&#x4F20;&#x9012;&#x7684;&#x6587;&#x4EF6;/URL</em>&#x6216;&#x8005;<em>read()</em>&#x65B9;&#x6CD5;&#x7684;&#x5BF9;&#x8C61;</p>
</li>
<li><p><code>.document_fromstring(string)</code><br>  &#x628A;&#x5B57;&#x7B26;&#x4E32;&#x89E3;&#x6790;&#x6210;&#x4E3A;&#x5B8C;&#x6574;HTML&#x6587;&#x6863;&#x5BF9;&#x8C61;</p>
</li>
<li><p><code>.fragment_fromstring(string, create_parent=False)</code><br>  &#x89E3;&#x6790;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;HTML&#x5BF9;&#x8C61;, &#x5E76;&#x5B8C;&#x6210;, &#x5F53;sreate_parent&#x90E8;&#x4F4D;False, &#x5219;&#x521B;&#x5EFA;&#x7236;&#x7EA7;</p>
</li>
<li><p><code>.fragments_fromstring(string)</code><br>  &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5728;HTML&#x6BB5;&#x843D;&#x4E2D;&#x53D1;&#x73B0;&#x7684;&#x5143;&#x7D20;&#x5BF9;&#x8C61;list</p>
</li>
<li><p><code>.fromstring(string)</code><br>  &#x8FD4;&#x56DE;&#x6839;&#x636E;&#x4F20;&#x9012;&#x7684;string&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x6216;&#x8005;&#x4E0D;&#x5B8C;&#x6574;&#x7684;HTML</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> lxml.html</div><div class="line"><span class="comment"># 1.</span></div><div class="line">url = <span class="string">&apos;http://www.sharedsea.com/&apos;</span></div><div class="line">parse_html = lxml.html.parse(url)</div><div class="line"><span class="keyword">print</span> parse_html.docinfo</div><div class="line"><span class="keyword">print</span> parse_html.parser</div><div class="line"><span class="comment"># 2.</span></div><div class="line">html_str = <span class="string">&apos;&lt;a&gt;a LINK &lt;/a&gt;&apos;</span></div><div class="line">document = lxml.html.document_fromstring(html_str)</div><div class="line"><span class="keyword">print</span> lxml.html.tostring(document)</div><div class="line"><span class="comment"># &lt;html&gt;&lt;body&gt;&lt;a&gt;a LINK &lt;/a&gt;&lt;/body&gt;&lt;/html&gt;</span></div><div class="line"><span class="comment"># 3. </span></div><div class="line">document = lxml.html.fragment_fromstring(html_str,create_parent=<span class="string">&apos;div&apos;</span>)</div><div class="line"><span class="keyword">print</span> lxml.html.tostring(document)</div><div class="line"><span class="comment"># &lt;div&gt;&lt;a&gt;a LINK &lt;/a&gt;&lt;/div&gt;</span></div><div class="line"><span class="comment"># 4.</span></div><div class="line">html_str = <span class="string">&apos;&lt;a&gt;a LINK &lt;/a&gt;&lt;b&gt;a BOLB &lt;/b&gt;&apos;</span></div><div class="line"><span class="keyword">print</span> lxml.html.fragments_fromstring(html_str)</div><div class="line"><span class="comment"># [&lt;Element a at 0x107909d08&gt;, &lt;Element b at 0x107909d60&gt;]</span></div></pre></td></tr></table></figure>
<h3 id="3-&#x83B7;&#x53D6;HTML&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;"><a href="#3-&#x83B7;&#x53D6;HTML&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;" class="headerlink" title="3. &#x83B7;&#x53D6;HTML&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;"></a>3. &#x83B7;&#x53D6;HTML&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;</h3><p>HTML&#x5143;&#x7D20;&#x5177;&#x6709;&#x6240;&#x6709;<code>ElementTree</code>&#x7684;&#x65B9;&#x6CD5;, &#x9664;&#x6B64;&#x4E4B;&#x5916;, &#x8FD8;&#x5305;&#x62EC;&#x4E00;&#x4E9B;&#x6269;&#x5C55;&#x65B9;&#x6CD5;:</p>
<ul>
<li><p><code>.drop_tree()</code><br>&#x5220;&#x9664;&#x8BE5;&#x5143;&#x7D20;&#x548C;&#x5B83;&#x7684;&#x6240;&#x6709;&#x5B50;&#x5143;&#x7D20;</p>
</li>
<li><p><code>.drop_tag()</code><br>&#x5220;&#x9664;&#x8BE5;&#x6807;&#x7B7E;, &#x4F46;&#x662F;&#x4FDD;&#x7559;&#x5B50;&#x5143;&#x7D20;&#x548C;&#x5185;&#x5BB9;</p>
</li>
<li><p><code>.find_class(&apos;class_name&apos;)</code><br>&#x83B7;&#x53D6;&#x6240;&#x6709;class&#x4E3A;&#x2019;class_name&#x2019;&#x7684;&#x5143;&#x7D20;&#x5217;&#x8868;</p>
</li>
<li><p><code>.find_rel_links(rel)</code><br>&#x83B7;&#x53D6;&#x6240;&#x6709;\<a rel="{rel}\"> &#x5143;&#x7D20;&#x7684;&#x5217;&#x8868;,E.g., doc.find_rel_links(&#x2018;tag&#x2019;)&#x5219;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;<code>tag</code>&#x7684;&#x94FE;&#x63A5;</a></p>
</li>
<li><p><code>.get_element_by_id(id, default=None)</code><br>&#x83B7;&#x53D6;id&#x7684;&#x5143;&#x7D20;,&#x5426;&#x5219;&#x4E3A;None</p>
</li>
<li><p><code>.text_content()</code><br>&#x83B7;&#x53D6;&#x8BE5;&#x5143;&#x7D20;&#x4E0B;&#x7684;&#x5185;&#x5BB9;, &#x5305;&#x62EC;&#x5B50;&#x5143;&#x7D20;&#x6807;&#x7B7E;.</p>
</li>
<li><p><code>.cssselect(expr)</code><br>&#x901A;&#x8FC7;css&#x9009;&#x62E9;&#x5668;&#x8FDB;&#x884C;&#x83B7;&#x53D6;&#x5143;&#x7D20;, &#x548C;xpath(expr)&#x6709;&#x76F8;&#x540C;&#x6548;&#x679C;</p>
</li>
<li><p><code>.label</code><br>&#x83B7;&#x53D6;&#x8BE5;&#x5143;&#x7D20;&#x76F8;&#x5173;&#x7684;<label>&#x6807;&#x7B7E;, &#x82E5;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x8FD4;&#x56DE;None</label></p>
</li>
<li><p><code>.base_url</code><br>&#x83B7;&#x53D6;&#x8FD9;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x57FA;&#x672C;Url, &#x82E5;&#x4E3A;&#x8BBE;&#x7F6E;&#x5219;&#x4E3A;None</p>
</li>
<li><p><code>.classes</code><br>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x5BF9;&#x8C61;&#xFF0C;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x548C;&#x4FEE;&#x6539;&#x5143;&#x7D20;&#x7684;&#x7C7B;&#x5C5E;&#x6027;&#x548C;&#x540D;&#x79F0;</p>
</li>
<li><p><code>.set(key, value=None)</code><br>&#x8BBE;&#x7F6E;&#x8BE5;&#x5143;&#x7D20;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x5C5E;&#x6027;&#x503C;</p>
</li>
</ul>
<h3 id="4-&#x4F7F;&#x7528;E-factory&#x521B;&#x5EFA;HTML"><a href="#4-&#x4F7F;&#x7528;E-factory&#x521B;&#x5EFA;HTML" class="headerlink" title="4. &#x4F7F;&#x7528;E-factory&#x521B;&#x5EFA;HTML"></a>4. &#x4F7F;&#x7528;E-factory&#x521B;&#x5EFA;HTML</h3><ol>
<li>&#x5B9E;&#x4F8B;</li>
<li>&#x67E5;&#x770B;&#x751F;&#x6210;&#x7684;&#x7F51;&#x9875; <code>open_in_browser()</code></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> lxml.html <span class="keyword">import</span> builder <span class="keyword">as</span> E</div><div class="line"><span class="comment"># import lxml.html.usedoctest</span></div><div class="line">html = E.HTML(</div><div class="line">    E.HEAD(</div><div class="line">        E.LINK(rel=<span class="string">&quot;stylesheet&quot;</span>, href=<span class="string">&quot;great.css&quot;</span>, type=<span class="string">&quot;text/css&quot;</span>)</div><div class="line">        ,E.TITLE(<span class="string">&apos;Test&apos;</span>)</div><div class="line">    )</div><div class="line">    ,E.BODY(</div><div class="line">        E.H1(E.CLASS(<span class="string">&quot;heading&quot;</span>), <span class="string">&quot;Top News&quot;</span>),</div><div class="line">        E.P(<span class="string">&quot;World News only on this page&quot;</span>, style=<span class="string">&quot;font-size: 200%&quot;</span>),</div><div class="line">        <span class="string">&quot;Ah, and here&apos;s some more text, by the way.&quot;</span>,</div><div class="line">        lxml.html.fromstring(<span class="string">&quot;&lt;p&gt;... and this is a parsed fragment ...&lt;/p&gt;&quot;</span>)</div><div class="line">    )</div><div class="line">)</div><div class="line"><span class="keyword">print</span> lxml.html.tostring(html)</div><div class="line">lxml.html.open_in_browser(html)</div></pre></td></tr></table></figure>
<h3 id="5-&#x4F7F;&#x7528;links"><a href="#5-&#x4F7F;&#x7528;links" class="headerlink" title="5. &#x4F7F;&#x7528;links"></a>5. &#x4F7F;&#x7528;links</h3><ol>
<li><p>&#x76F8;&#x5173;&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;</p>
<ul>
<li><p><code>.iterlinks()</code><br>&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;link&#x94FE;&#x63A5;, &#x5305;&#x62EC;action, archive, background, cite, classid, codebase, data, href, longdesc, profile, src, usemap, dynsrc, or lowsrc attribute&#x7B49;,&#x4F46;&#x662F;&#x4E0D;&#x5305;&#x62EC;\<base href\="">. &#x4E0D;&#x5B58;&#x5728;&#x5219;&#x8FD4;&#x56DE;None</p>
</li>
<li><p><code>.resolve_base_href()</code><br>&#x4FEE;&#x6539;\<base href="">\, &#x540C;&#x65F6;&#x79FB;&#x9664;&#x539F;&#x6709;&#x6807;&#x7B7E;</p>
</li>
<li><p><code>.make_links_absolute(base_href, resolve_base_href=True)</code><br>&#x4FEE;&#x6539;&#x4E3A;&#x7EDD;&#x5BF9;url, &#x82E5;resolve_base_href&#x4E3A;True, &#x5219;&#x6240;&#x6709;&#x7684;\<base href="">\&#x90FD;&#x4F1A;&#x6267;&#x884C;.</p>
</li>
<li><p><code>.rewrite_links(link_repl_func, resolve_base_href=True, base_href=None)</code><br>&#x901A;&#x8FC7;link_repl_func&#x65B9;&#x6CD5;&#x91CD;&#x5199;&#x6587;&#x6863;&#x4E2D;&#x6240;&#x6709;&#x7684;&#x94FE;&#x63A5;</p>
</li>
</ul>
</li>
<li><p>&#x666E;&#x901A;&#x51FD;&#x6570;</p>
<ul>
<li><code>iterlinks(html)</code></li>
<li><code>resolve_base_href(html)</code></li>
<li><code>make_links_absolute(html, base_href, resolve_base_href=True)</code></li>
<li><code>rewrite_links(html, link_repl_func, resolve_base_href=True, base_href=None)</code><br><strong>PS:</strong> &#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x5C06;&#x89E3;&#x6790;HTML&#x5982;&#x679C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x65B0;&#x7684; HTML&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x5982;&#x679C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x5C06;&#x88AB;&#x590D;&#x5236; &#xFF08;&#x9664;iterlinks()&#xFF09;&#xFF0C;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x3002;</li>
</ul>
</li>
</ol>
<h3 id="6-form&#x8868;&#x5355;"><a href="#6-form&#x8868;&#x5355;" class="headerlink" title="6. form&#x8868;&#x5355;"></a>6. form&#x8868;&#x5355;</h3><p>&#xA0;&#xA0;&#xA0;&#xA0;&#x901A;&#x8FC7;doc.form[0] &#x83B7;&#x53D6;&#x7B2C;&#x4E00;&#x4E2A;form&#x8868;&#x5355;</p>
<ul>
<li><ol>
<li><p>&#x57FA;&#x672C;&#x65B9;&#x6CD5;</p>
<ul>
<li><p>input/select/textarea</p>
<ul>
<li><code>.name</code></li>
<li><code>.value</code> </li>
</ul>
</li>
<li><p>select</p>
<ul>
<li><code>.value_options</code> &#x83B7;&#x53D6;&#x6240;&#x6709;select&#x4E0B;option&#x7684;&#x503C;</li>
<li><code>.multiple</code> &#x82E5;&#x4E3A;<code>&lt;select multiple&gt;</code>&#x5219;&#x4E3A;True</li>
</ul>
</li>
<li><p>input</p>
<ul>
<li><code>.type</code> &#x83B7;&#x53D6;input&#x7684;type&#x5C5E;&#x6027;&#x503C;</li>
<li><code>.checkable</code> &#x82E5;&#x8BE5;input&#x53EF;&#x4EE5;&#x88AB;&#x9009;&#x62E9;(type=checkbox/radio),&#x5219;&#x8FD4;&#x56DE;True</li>
<li><code>.checked</code> &#x5143;&#x7D20;&#x88AB;&#x9009;&#x4E2D;&#x88C5;&#x6001;, &#x5426;&#x5219;&#x4F1A;&#x62A5;<code>AttributeError</code>&#x5F02;&#x5E38;</li>
</ul>
</li>
<li><p>others</p>
<ul>
<li><code>.inputs</code> &#x83B7;&#x53D6;form&#x8868;&#x5355;&#x4E2D;&#x7684;input&#x5BF9;&#x5E94;&#x5143;&#x7D20;, &#x4EE5;&#x5B57;&#x5178;&#x7C7B;&#x578B;&#x8FD4;&#x56DE;</li>
<li><code>.fields</code> &#x83B7;&#x53D6;form&#x8868;&#x5355;&#x4E2D;input&#x5BF9;&#x5E94;&#x7684;name&#x548C;value&#x503C;, &#x4EE5;&#x5B57;&#x5178;&#x7C7B;&#x578B;&#x8FD4;&#x56DE;</li>
<li><code>.form_values()</code> &#x8FD4;&#x56DE;&#x6709;name,value&#x7EC4;&#x6210;&#x7684;&#x5143;&#x7956;&#x7684;&#x5217;&#x8868;, [(name, value),&#x2026;]</li>
<li><code>.action</code> &#x83B7;&#x53D6;form&#x8868;&#x5355;&#x63D0;&#x4EA4;&#x7684;URL</li>
<li><code>.method</code> &#x83B7;&#x53D6;form&#x8868;&#x5355;&#x63D0;&#x4EA4;&#x65B9;&#x5F0F;, &#x2018;GET or POST&#x2019;</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li><ol>
<li>&#x586B;&#x5145;&#x8868;&#x5355;</li>
</ol>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> lxml.html <span class="keyword">import</span> fromstring, tostring</div><div class="line">form_page = fromstring(<span class="string">&apos;&apos;&apos;&lt;html&gt;&lt;body&gt;&lt;form&gt;</span></div><div class="line">  Your name: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt; &lt;br&gt;</div><div class="line">  Your phone: &lt;input type=&quot;text&quot; name=&quot;phone&quot;&gt; &lt;br&gt;</div><div class="line">  Your favorite pets: &lt;br&gt;</div><div class="line">  Dogs: &lt;input type=&quot;checkbox&quot; name=&quot;interest&quot; value=&quot;dogs&quot;&gt; &lt;br&gt;</div><div class="line">  Cats: &lt;input type=&quot;checkbox&quot; name=&quot;interest&quot; value=&quot;cats&quot;&gt; &lt;br&gt;</div><div class="line">  Llamas: &lt;input type=&quot;checkbox&quot; name=&quot;interest&quot; value=&quot;llamas&quot;&gt; &lt;br&gt;</div><div class="line">  &lt;input type=&quot;submit&quot;&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;&apos;&apos;&apos;)</div><div class="line">form = form_page.forms[<span class="number">0</span>]</div><div class="line">form.fields = dict(</div><div class="line">  name=<span class="string">&apos;John Smith&apos;</span>,</div><div class="line">  phone=<span class="string">&apos;555-555-3949&apos;</span>,</div><div class="line">  interest=set([<span class="string">&apos;cats&apos;</span>, <span class="string">&apos;llamas&apos;</span>]))</div><div class="line"><span class="keyword">print</span> tostring(form)</div><div class="line"><span class="string">&quot;&quot;&quot;&lt;html&gt;</span></div><div class="line"> &lt;body&gt;</div><div class="line">   &lt;form&gt;</div><div class="line">   Your name:</div><div class="line">     &lt;input name=&quot;name&quot; type=&quot;text&quot; value=&quot;John Smith&quot;&gt;</div><div class="line">     &lt;br&gt;Your phone:</div><div class="line">     &lt;input name=&quot;phone&quot; type=&quot;text&quot; value=&quot;555-555-3949&quot;&gt;</div><div class="line">     &lt;br&gt;Your favorite pets:</div><div class="line">     &lt;br&gt;Dogs:</div><div class="line">     &lt;input name=&quot;interest&quot; type=&quot;checkbox&quot; value=&quot;dogs&quot;&gt;</div><div class="line">     &lt;br&gt;Cats:</div><div class="line">     &lt;input checked name=&quot;interest&quot; type=&quot;checkbox&quot; value=&quot;cats&quot;&gt;</div><div class="line">     &lt;br&gt;Llamas:</div><div class="line">     &lt;input checked name=&quot;interest&quot; type=&quot;checkbox&quot; value=&quot;llamas&quot;&gt;</div><div class="line">     &lt;br&gt;</div><div class="line">     &lt;input type=&quot;submit&quot;&gt;</div><div class="line">   &lt;/form&gt;</div><div class="line"> &lt;/body&gt;</div><div class="line">&lt;/html&gt;&quot;&quot;&quot;</div></pre></td></tr></table></figure>
<ul>
<li><ol>
<li>&#x63D0;&#x4EA4;&#x8868;&#x5355;<br>&#x901A;&#x8FC7;lxml.html.submit_form(form_element)&#x63D0;&#x4EA4;&#x8868;&#x5355;, &#x8FD4;&#x56DE;file&#x5BF9;&#x8C61;(the result of urllib.urlopen()).<br>&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code>extra_values</code>&#x6765;&#x6DFB;&#x52A0;&#x6269;&#x5C55;input&#x503C;, extra_values = {&#x2018;name&#x2019;:&#x2019;value&#x2019;}.<br>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>open_http()</code>&#x9A8C;&#x8BC1;&#x63D0;&#x4EA4;&#x72B6;&#x6001;, open_http(method, url, values).</li>
</ol>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> lxml.html <span class="keyword">import</span> parse, submit_form</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>page = parse(<span class="string">&apos;http://tinyurl.com&apos;</span>).getroot()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>page.forms[<span class="number">1</span>].fields[<span class="string">&apos;url&apos;</span>] = <span class="string">&apos;http://lxml.de/&apos;</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = parse(submit_form(page.forms[<span class="number">1</span>])).getroot()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>[a.attrib[<span class="string">&apos;href&apos;</span>] <span class="keyword">for</span> a <span class="keyword">in</span> result.xpath(<span class="string">&quot;//a[@target=&apos;_blank&apos;]&quot;</span>)]</div><div class="line">[<span class="string">&apos;http://tinyurl.com/2xae8s&apos;</span>, <span class="string">&apos;http://preview.tinyurl.com/2xae8s&apos;</span>]</div></pre></td></tr></table></figure>
<h3 id="7-&#x6E05;&#x7406;HTML"><a href="#7-&#x6E05;&#x7406;HTML" class="headerlink" title="7. &#x6E05;&#x7406;HTML"></a>7. &#x6E05;&#x7406;HTML</h3><p>&#x901A;&#x8FC7;lxml.html.clean&#x6A21;&#x5757;&#x4E2D;&#x7684;Cleaner&#x7C7B;&#x6765;&#x6E05;&#x7406;HTML&#x9875;&#x9762;, &#x652F;&#x6301;&#x6E05;&#x7406;&#x5D4C;&#x5165;&#x6216;&#x8005;&#x811A;&#x672C;&#x7C7B;&#x578B;&#x7684;&#x5185;&#x5BB9;/&#x7279;&#x6B8A;&#x6807;&#x7B7E;/CSS/&#x6CE8;&#x91CA;&#x7B49;.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">html = <span class="string">&apos;&apos;&apos;</span></div><div class="line">    &lt;html&gt;</div><div class="line">     &lt;head&gt;</div><div class="line">       &lt;script type=&quot;text/javascript&quot; src=&quot;evil-site&quot;&gt;&lt;/script&gt;</div><div class="line">       &lt;link rel=&quot;alternate&quot; type=&quot;text/rss&quot; src=&quot;evil-rss&quot;&gt;</div><div class="line">       &lt;style&gt;</div><div class="line">         body {background-image: url(javascript:do_evil)};</div><div class="line">         div {color: expression(evil)};</div><div class="line">       &lt;/style&gt;</div><div class="line">     &lt;/head&gt;</div><div class="line">     &lt;body onload=&quot;evil_function()&quot;&gt;</div><div class="line">       &lt;!-- I am interpreted for EVIL! --&gt;</div><div class="line">       &lt;a href=&quot;javascript:evil_function()&quot;&gt;a link&lt;/a&gt;</div><div class="line">       &lt;a href=&quot;#&quot; onclick=&quot;evil_function()&quot;&gt;another link&lt;/a&gt;</div><div class="line">       &lt;p onclick=&quot;evil_function()&quot;&gt;a paragraph&lt;/p&gt;</div><div class="line">       &lt;div style=&quot;display: none&quot;&gt;secret EVIL!&lt;/div&gt;</div><div class="line">       &lt;object&gt; of EVIL! &lt;/object&gt;</div><div class="line">       &lt;iframe src=&quot;evil-site&quot;&gt;&lt;/iframe&gt;</div><div class="line">       &lt;form action=&quot;evil-site&quot;&gt;</div><div class="line">         Password: &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;</div><div class="line">       &lt;/form&gt;</div><div class="line">       &lt;blink&gt;annoying EVIL!&lt;/blink&gt;</div><div class="line">       &lt;a href=&quot;evil-site&quot;&gt;spam spam SPAM!&lt;/a&gt;</div><div class="line">       &lt;image src=&quot;evil!&quot;&gt;</div><div class="line">     &lt;/body&gt;</div><div class="line">    &lt;/html&gt;</div><div class="line">&apos;&apos;&apos;</div></pre></td></tr></table></figure>
<ul>
<li>&#x6E05;&#x7406;&#x6240;&#x6709;&#x6000;&#x7591;&#x7684;&#x5143;&#x7D20;&#x548C;&#x5185;&#x5BB9;, <code>clean_html()</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> lxml.html.clean <span class="keyword">import</span> clean_html</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> clean_html(html)</div><div class="line"><span class="string">&quot;&quot;&quot;</span></div><div class="line">&lt;div&gt;&lt;style&gt;/* deleted */&lt;/style&gt;&lt;body&gt;</div><div class="line"></div><div class="line">   &lt;a href=&quot;&quot;&gt;a link&lt;/a&gt;</div><div class="line">   &lt;a href=&quot;#&quot;&gt;another link&lt;/a&gt;</div><div class="line">   &lt;p&gt;a paragraph&lt;/p&gt;</div><div class="line">   &lt;div&gt;secret EVIL!&lt;/div&gt;</div><div class="line">    of EVIL!</div><div class="line"></div><div class="line"></div><div class="line">     Password:</div><div class="line">   annoying EVIL!&lt;a href=&quot;evil-site&quot;&gt;spam spam SPAM!&lt;/a&gt;</div><div class="line">   &lt;img src=&quot;evil!&quot;&gt;&lt;/body&gt;&lt;/div&gt;</div><div class="line">&quot;&quot;&quot;</div></pre></td></tr></table></figure>
<ul>
<li>&#x4F7F;&#x7528;Cleaner&#x7C7B;&#x81EA;&#x5B9A;&#x4E49;&#x6E05;&#x7406;&#x5185;&#x5BB9;</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div></pre></td><td class="code"><pre><div class="line"><span class="string">&quot;&quot;&quot;</span></div><div class="line">    Instances cleans the document of each of the possible offending</div><div class="line">    elements.  The cleaning is controlled by attributes; you can</div><div class="line">    override attributes in a subclass, or set them in the constructor.</div><div class="line"></div><div class="line">    ``scripts``:</div><div class="line">        Removes any ``&lt;script&gt;`` tags. </div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``javascript``:</div><div class="line">        Removes any Javascript, like an ``onclick`` attribute. </div><div class="line">        Also removes stylesheets as they could contain Javascript.</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``comments``:</div><div class="line">        Removes any comments.</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``style``:</div><div class="line">        Removes any style tags.</div><div class="line">        Default False</div><div class="line"></div><div class="line">    ``inline_style``</div><div class="line">        Removes any style attributes.  </div><div class="line">        Defaults to the value of the ``style`` option.</div><div class="line">        Default None</div><div class="line"></div><div class="line">    ``links``:</div><div class="line">        Removes any ``&lt;link&gt;`` tags</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``meta``:</div><div class="line">        Removes any ``&lt;meta&gt;`` tags</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``page_structure``:</div><div class="line">        Structural parts of a page: ``&lt;head&gt;``, ``&lt;html&gt;``, ``&lt;title&gt;``.</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``processing_instructions``:</div><div class="line">        Removes any processing instructions.</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``embedded``:</div><div class="line">        Removes any embedded objects (flash, iframes)</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``frames``:</div><div class="line">        Removes any frame-related tags</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``forms``:</div><div class="line">        Removes any form tags</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``annoying_tags``:</div><div class="line">        Tags that aren&apos;t *wrong*, but are annoying.  </div><div class="line">        ``&lt;blink&gt;`` and ``&lt;marquee&gt;``.</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``remove_tags``:</div><div class="line">        A list of tags to remove.  Only the tags will be removed,</div><div class="line">        their content will get pulled up into the parent tag.</div><div class="line">        Default None</div><div class="line"></div><div class="line">    ``kill_tags``:</div><div class="line">        A list of tags to kill.  Killing also removes the tag&apos;s content,</div><div class="line">        i.e. the whole subtree, not just the tag itself.</div><div class="line">        Default None</div><div class="line"></div><div class="line">    ``allow_tags``:</div><div class="line">        A list of tags to include (default include all).</div><div class="line">        Default None</div><div class="line"></div><div class="line">    ``remove_unknown_tags``:</div><div class="line">        Remove any tags that aren&apos;t standard parts of HTML.</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``safe_attrs_only``:</div><div class="line">        If true, only include &apos;safe&apos; attributes (specifically the list</div><div class="line">        from the feedparser HTML sanitisation web site).</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``safe_attrs``:</div><div class="line">        A set of attribute names to override the default list of attributes considered &apos;safe&apos; (when safe_attrs_only=True).</div><div class="line"></div><div class="line">    ``add_nofollow``:</div><div class="line">        If true, then any &lt;a&gt; tags will have ``rel=&quot;nofollow&quot;`` added to them.</div><div class="line">        Default True</div><div class="line"></div><div class="line">    ``host_whitelist``:</div><div class="line">        A list or set of hosts that you can use for embedded content</div><div class="line">        (for content like ``&lt;object&gt;``, ``&lt;link rel=&quot;stylesheet&quot;&gt;``, etc).</div><div class="line">        You can also implement/override the method</div><div class="line">        ``allow_embedded_url(el, url)`` or ``allow_element(el)`` to</div><div class="line">        implement more complex rules for what can be embedded.</div><div class="line">        Anything that passes this test will be shown, regardless of</div><div class="line">        the value of (for instance) ``embedded``.</div><div class="line"></div><div class="line">        Note that this parameter might not work as intended if you do not</div><div class="line">        make the links absolute before doing the cleaning.</div><div class="line"></div><div class="line">        Note that you may also need to set ``whitelist_tags``.</div><div class="line">        </div><div class="line">        Default ()</div><div class="line"></div><div class="line">    ``whitelist_tags``:</div><div class="line">        A set of tags that can be included with ``host_whitelist``.</div><div class="line">        The default is ``iframe`` and ``embed``; you may wish to</div><div class="line">        include other tags like ``script``, or you may want to</div><div class="line">        implement ``allow_embedded_url`` for more control.  Set to None to</div><div class="line">        include all tags.</div><div class="line">        Default set([&apos;iframe&apos;, &apos;embed&apos;])</div><div class="line"></div><div class="line">    This modifies the document *in place*.</div><div class="line">&quot;&quot;&quot;</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> lxml.html.clean <span class="keyword">import</span> Cleaner</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cleaner = Cleaner(page_structure=<span class="keyword">False</span>, links=<span class="keyword">False</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> cleaner.clean_html(html)</div><div class="line"><span class="string">&quot;&quot;&quot;</span></div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">    &lt;link rel=&quot;alternate&quot; src=&quot;evil-rss&quot; type=&quot;text/rss&quot;&gt;</div><div class="line">    &lt;style&gt;/* deleted */&lt;/style&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">  &lt;body&gt;</div><div class="line">    &lt;a href=&quot;&quot;&gt;a link&lt;/a&gt;</div><div class="line">    &lt;a href=&quot;#&quot;&gt;another link&lt;/a&gt;</div><div class="line">    &lt;p&gt;a paragraph&lt;/p&gt;</div><div class="line">    &lt;div&gt;secret EVIL!&lt;/div&gt;</div><div class="line">    of EVIL!</div><div class="line">    Password:</div><div class="line">    annoying EVIL!</div><div class="line">    &lt;a href=&quot;evil-site&quot;&gt;spam spam SPAM!&lt;/a&gt;</div><div class="line">    &lt;img src=&quot;evil!&quot;&gt;</div><div class="line">  &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line">&quot;&quot;&quot;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cleaner = Cleaner(style=<span class="keyword">True</span>, links=<span class="keyword">True</span>, add_nofollow=<span class="keyword">True</span>,</div><div class="line"><span class="meta">... </span>                  page_structure=<span class="keyword">False</span>, safe_attrs_only=<span class="keyword">False</span>)</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> cleaner.clean_html(html)</div><div class="line"><span class="string">&quot;&quot;&quot;</span></div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">  &lt;body&gt;</div><div class="line">    &lt;a href=&quot;&quot;&gt;a link&lt;/a&gt;</div><div class="line">    &lt;a href=&quot;#&quot;&gt;another link&lt;/a&gt;</div><div class="line">    &lt;p&gt;a paragraph&lt;/p&gt;</div><div class="line">    &lt;div&gt;secret EVIL!&lt;/div&gt;</div><div class="line">    of EVIL!</div><div class="line">    Password:</div><div class="line">    annoying EVIL!</div><div class="line">    &lt;a href=&quot;evil-site&quot; rel=&quot;nofollow&quot;&gt;spam spam SPAM!&lt;/a&gt;</div><div class="line">    &lt;img src=&quot;evil!&quot;&gt;</div><div class="line">  &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line">&quot;&quot;&quot;</div></pre></td></tr></table></figure>
<h3 id="8-&#x83B7;&#x53D6;&#x67D0;URL&#x4E0B;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#x5B57;&#x6BB5;"><a href="#8-&#x83B7;&#x53D6;&#x67D0;URL&#x4E0B;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#x5B57;&#x6BB5;" class="headerlink" title="8. &#x83B7;&#x53D6;&#x67D0;URL&#x4E0B;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#x5B57;&#x6BB5;"></a>8. &#x83B7;&#x53D6;&#x67D0;URL&#x4E0B;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#x5B57;&#x6BB5;</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> lxml.html</div><div class="line"><span class="keyword">import</span> pprint</div><div class="line"><span class="keyword">import</span> urllib2</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_form</span><span class="params">(url)</span>:</span></div><div class="line">    data = {}</div><div class="line"></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        html = urllib2.urlopen(url).read()</div><div class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</div><div class="line">        html = <span class="keyword">None</span></div><div class="line">    <span class="keyword">if</span> html <span class="keyword">is</span> <span class="keyword">None</span>: <span class="keyword">return</span> data</div><div class="line"></div><div class="line">    tree = lxml.html.fromstring(html)</div><div class="line"></div><div class="line">    <span class="keyword">for</span> e <span class="keyword">in</span> tree.cssselect(<span class="string">&apos;form input&apos;</span>):</div><div class="line">        <span class="keyword">if</span> e.get(<span class="string">&apos;name&apos;</span>):</div><div class="line">            data[e.get(<span class="string">&apos;name&apos;</span>)] = e.get(<span class="string">&apos;value&apos;</span>)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> data</div><div class="line"></div><div class="line">pprint.pprint(parse_form(url))(url):</div></pre></td></tr></table></figure>
<p><strong>&#x53C2;&#x8003;&#x6587;&#x7AE0;:</strong><br><a href="http://lxml.de/lxmlhtml.html" target="_blank" rel="external">http://lxml.de/lxmlhtml.html</a><br>Author <a href="http://www.sharedsea.com" target="_blank" rel="external">@Snaker95</a></p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/读书笔记-Python/" rel="tag">#读书笔记-Python</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/读书笔记/读书笔记-Python/第十一天 记录/" rel="next" title="第十一天 记录 Python urllib2和第三方模块python-whois">
                <i class="fa fa-chevron-left"></i> 第十一天 记录 Python urllib2和第三方模块python-whois
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/读书笔记/读书笔记-Python/第十三天 记录/" rel="prev" title="第十三天 记录 Python文件操作-磁盘缓存网页">
                第十三天 记录 Python文件操作-磁盘缓存网页 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Snaker95" />
          <p class="site-author-name" itemprop="name">Snaker95</p>
          <p class="site-description motion-element" itemprop="description">人生点滴</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">101</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://www.sharedsea.com/" target="_blank" title="snaker95's Blob">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  snaker95's Blob
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://liu2lin600.github.io/" target="_blank" title="liu2lin600's Blob">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  liu2lin600's Blob
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.qiuxiaochao.com/" target="_blank" title="超超's Blob">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  超超's Blob
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.sszgr.com/" target="_blank" title="sszgr's Blob">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  sszgr's Blob
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#第十二天-记录"><span class="nav-text">第十二天 记录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-lxml-html模块学习步骤"><span class="nav-text">1. lxml.html模块学习步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-解析HTML"><span class="nav-text">2. 解析HTML</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#解析HTML段落的相关方法-lxml-html"><span class="nav-text">解析HTML段落的相关方法: lxml.html</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-获取HTML元素的方法"><span class="nav-text">3. 获取HTML元素的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-使用E-factory创建HTML"><span class="nav-text">4. 使用E-factory创建HTML</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-使用links"><span class="nav-text">5. 使用links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-form表单"><span class="nav-text">6. form表单</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-清理HTML"><span class="nav-text">7. 清理HTML</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-获取某URL下提交表单字段"><span class="nav-text">8. 获取某URL下提交表单字段</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-bicycle"></i>
    <i class="fa fa-linux"></i>
    <i class="fa fa-windows"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Snaker95</span>
</div>

        

<div class="busuanzi-count">

  <script async src="/js/src/busuanzi.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i>  人生<span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i>  顿悟<span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  





  
  
  

  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>

  <script type="text/javascript" alpha="0.2" src="http://cdn.atool.org/res/ribbon.min.js"></script>
  <script type="text/javascript" alpha="0.1" src="http://cdn.atool.org/res/ribbon.min.js"></script>
</body>
</html>
